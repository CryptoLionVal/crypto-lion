<template>
  <nav :class="headerClasses" class="fixed w-full z-30 top-0 text-white">
    <div
      class="w-full container mx-auto flex flex-wrap items-center justify-between mt-0 px-4 py-2"
    >
      <div class="pl-4 flex items-center text-gray-100">
        <NuxtLink
          prefetch
          :to="localePath('/')"
          :class="{ 'text-blue-900': floating }"
          class="text-white no-underline hover:no-underline font-bold text-2xl lg:text-4xl"
          :title="$t('navbar.logo.link.title')"
        >
          <svg
            id="Layer_1"
            class="h-8 fill-current inline"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0px"
            y="0px"
            viewBox="0 0 511.922 511.922"
            style="enable-background: new 0 0 511.922 511.922"
            xml:space="preserve"
          >
            <g>
              <g>
                <path
                  d="M498.065,195.368c-5.531-4.789-26.605-13.811-39.76-19.186l-28.652-24.559c-1.094-1.633-2.609-2.938-4.406-3.773
			l-7.437-6.374l-3.749-9.975c-0.375-1.031-0.922-2-1.594-2.859c-22.122-28.012-60.055-52.103-71.006-58.742
			c-2.766-5.288-9.139-14.576-22.888-24.074c-24.528-16.975-61.476-27.676-109.829-31.809c-6.983-0.602-13.998-0.898-20.841-0.898
			c-29.59,0-57.852,5.633-83.957,16.748c-20.871,8.881-40.4,21.262-58.023,36.783C15.928,93.068,1.82,119.432,1.242,120.541
			c-1.656,3.117-1.656,6.851,0,9.976L193.216,493.13c0.063,0.141,0.156,0.266,0.234,0.422c0.047,0.094,0.109,0.188,0.172,0.281
			c0.14,0.219,0.281,0.438,0.437,0.625c0.063,0.094,0.125,0.156,0.188,0.25c0.125,0.156,0.25,0.313,0.391,0.469
			c0.047,0.063,0.109,0.125,0.172,0.203c0.406,0.422,0.828,0.828,1.281,1.172c0.063,0.063,0.141,0.094,0.203,0.156
			c0.172,0.125,0.359,0.25,0.531,0.375c0.078,0.031,0.141,0.094,0.234,0.141c0.219,0.141,0.468,0.281,0.718,0.406
			c0.063,0.047,0.141,0.078,0.219,0.109c0.188,0.094,0.375,0.172,0.563,0.25c0.109,0.047,0.219,0.094,0.344,0.125
			c0.156,0.063,0.344,0.125,0.5,0.188c0.125,0.031,0.219,0.063,0.328,0.094c0.266,0.078,0.516,0.141,0.797,0.188
			c0.094,0.031,0.203,0.047,0.313,0.063c0.187,0.031,0.375,0.063,0.578,0.094c0.109,0,0.219,0.016,0.328,0.031
			c0.266,0.016,0.531,0.031,0.813,0.031c0.031,0,0.047,0,0.063,0c0.031,0,0.031,0,0.063,0c0.219,0,0.438,0,0.656-0.031
			c2.031-0.125,50.274-3.406,97.643-19.748c59.445-20.512,75.739-64.865,78.957-98.455c1.875-19.746-0.469-37.916-2.999-50.305
			c17.56,2.578,45.056,6.248,59.71,6.248c1.969,0,3.656-0.063,5.156-0.188c25.043-2.092,30.418-22.902,30.621-23.777
			c0.156-0.594,0.25-1.188,0.281-1.797l0.484-6.889c19.355-14.154,21.855-42.775,22.715-52.72c0.016-0.281,0.047-0.586,0.078-0.875
			c1-1.539,3.188-4.366,4.719-6.343c3.015-3.898,5.468-7.14,7.311-10.038c0.013-0.024,0.029-0.047,0.06-0.078
			c2.5-3.96,3.844-7.288,3.844-10.787C511.922,214.693,505.454,201.773,498.065,195.368z M22.88,125.799
			c5.077-8.124,17.232-25.599,37.151-43.143c15.92-14.014,33.496-25.177,52.258-33.168c23.466-9.982,48.9-15.045,75.615-15.045
			c6.249,0,12.639,0.281,19.029,0.828c29.465,2.516,70.24,9.163,97.143,26.513c1.406,0.905,2.719,1.804,3.921,2.687
			c-24.105-1.297-61.834-1.398-101.751,5.905c-39.245,7.171-72.412,20.068-98.549,38.331
			c-26.059,18.208-45.088,41.682-56.805,69.998L22.88,125.799z M64.576,204.553c8.905-32.495,27.434-58.804,55.133-78.224
			c23.544-16.489,53.774-28.23,89.878-34.886c41.932-7.726,82.208-6.718,104.392-5.187c-6.155,10.094-13.684,24.662-19.247,42.683
			c-9.217-0.414-24.684-0.492-43.119,1.859c-39.338,5.007-73.74,18.825-99.471,39.963c-28.324,23.255-46.791,55.164-55.102,95.111
			L64.576,204.553z M114.008,297.922c0.047-0.297,0.094-0.594,0.109-0.906c3.89-47.876,21.2-84.777,51.446-109.68
			c28.434-23.403,63.617-32.113,88.113-35.3c14.591-1.898,27.246-2.117,35.871-1.922c-3.031,16.656-3.563,33.301-1.625,49.791
			c-21.998,1.945-68.147,10.522-102.58,47.532c-24.997,26.864-38.682,63.108-40.87,108.04L114.008,297.922z M191.356,444.028
			l-24.387-46.057c-0.016-0.188-0.016-0.359-0.031-0.531c-5.78-59.305,5.608-104.828,33.871-135.309
			c16.31-17.592,37.823-29.91,63.96-36.604c11.029-2.836,20.638-4.008,27.027-4.5c0.75,3.055,1.593,6.093,2.53,9.132
			c2.766,9.046,6.313,17.997,10.624,26.848c-12.967,6.539-35.464,20.107-57.117,43.947c-19.013,20.918-33.495,45.479-43.088,72.99
			C197.231,395.565,192.747,419.001,191.356,444.028z M257.52,469.009c-18.498,4.094-34.839,6.328-44.947,7.469
			c-1.671-34.762,2.375-66.617,12.077-94.848c8.53-24.715,21.388-46.773,38.245-65.553c20.091-22.342,41.244-34.809,52.399-40.369
			c8.248,13.311,18.247,26.324,29.98,38.994c-9.141,5.75-21.951,15.248-35.059,29.465c-14.014,15.186-25.512,32.746-34.198,52.18
			C266.205,418.329,259.988,442.747,257.52,469.009z M358.693,378.538c-3.781,39.807-25.56,66.818-64.68,80.316
			c-4.795,1.656-9.623,3.172-14.436,4.547c2.625-20.779,7.859-40.137,15.623-57.68c7.625-17.248,17.717-32.84,29.996-46.338
			c10.842-11.904,22.06-20.607,30.59-26.121C358.068,344.042,360.412,360.618,358.693,378.538z M474.523,236.316l4.842,0.492
			c-2.376,3.341-3.704,5.771-4.235,8.42c-0.203,1.07-0.313,2.194-0.484,4.062c-0.655,7.554-2.593,29.854-14.872,37.917
			c-4.047,0.094-14.873-0.094-35.512-3.25c-5.827-0.875-11.264,3.125-12.154,8.938c-0.891,5.811,3.109,11.264,8.937,12.154
			c13.639,2.063,23.481,2.967,30.323,3.311c-0.891,1.859-3.718,6.063-11.342,6.688c-0.891,0.094-2.031,0.125-3.375,0.125
			c-17.372,0-57.148-6.031-68.959-7.889c-26.152-26.389-43.916-54.235-52.805-82.825c-7.25-23.294-8.687-47.229-4.25-71.146
			c5.344-28.809,18.029-50.884,25.294-61.711c13.732,8.772,41.682,27.98,58.757,48.985l2.359,6.266h-13.42
			c-5.874,0-10.654,4.78-10.654,10.67c0,5.89,4.78,10.663,10.654,10.663h0.313c0,5.89,4.781,10.662,10.67,10.662
			c5.891,0,10.671-4.772,10.671-10.662h10.905l29.559,25.316c0.874,0.75,1.843,1.352,2.921,1.789
			c14.576,5.913,32.261,13.834,35.495,16.255c1.172,1.055,2.438,2.813,3.516,4.672l-10.968-1.125
			c-5.874-0.594-11.093,3.663-11.702,9.53C464.398,230.481,468.679,235.715,474.523,236.316z"
                />
              </g>
            </g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
          </svg>
          CRYPTO LION
        </NuxtLink>
      </div>
      <div class="block lg:hidden pr-4">
        <button
          class="flex items-center p-1 text-gray-500 hover:text-gray-900 focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out"
          @click="hideMenu = !hideMenu"
        >
          <svg
            class="fill-current h-6 w-6"
            viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg"
          >
            <title>Menu</title>
            <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" />
          </svg>
        </button>
      </div>
      <div
        :class="contentClasses"
        class="w-full flex-grow lg:flex lg:items-center lg:w-auto mt-2 lg:mt-0 bg-white lg:bg-transparent p-4 lg:p-0 z-20"
      >
        <ul class="list-reset lg:flex justify-end flex-1 items-center">
          <li class="mr-3" @click="hideMenu = true">
            <NuxtLink
              v-for="link in $t('navbar.links')"
              :key="link.hash"
              tag="button"
              prefetch
              :to="
                typeof link.href === 'string'
                  ? link.href
                  : link.href.hash.length === 0
                  ? localePath(link.href.path)
                  : localePath(link.href.path) + '#' + link.href.hash
              "
              class="inline-block py-2 px-4 no-underline"
              :title="link.title"
              @click.native="$store.commit('setStep', 'first')"
              >{{ link.name }}</NuxtLink
            >
          </li>
        </ul>
        <NuxtLink
          tag="button"
          prefetch
          :class="actionClasses"
          :title="$t('stake_now.title')"
          class="mx-auto lg:mx-0 font-bold rounded-full mt-4 lg:mt-0 py-3 px-6 shadow opacity-75 focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out"
          :to="localePath('how-to-stake-cro')"
          @click.native="navigate"
        >
          {{ buttonText }}
        </NuxtLink>
      </div>
    </div>
    <hr class="border-b border-gray-100 opacity-25 my-0 py-0" />
  </nav>
</template>

<script>
export default {
  data() {
    return {
      floating: false,
      hideMenu: true,
    }
  },
  computed: {
    headerClasses() {
      return {
        'bg-white': this.floating,
        shadow: this.floating,
      }
    },
    contentClasses() {
      return {
        'text-gray-100': !this.floating,
        'text-black': this.floating,
        'bg-gray-100': !this.floating,
        'bg-white': this.floating,
        gradient: !this.hideMenu && !this.floating,
        hidden: this.hideMenu,
      }
    },
    actionClasses() {
      return {
        'bg-white': !this.floating,
        gradient: this.floating,
        'text-gray-800': !this.floating,
        'text-white': this.floating,
      }
    },
    buttonText() {
      return this.$store.state.client === null
        ? this.$t('stake_now.name')
        : this.$store.state.balance +
            ' ' +
            this.$chain.config('PREFIX').toUpperCase()
    },
  },
  mounted() {
    document.addEventListener('scroll', () => {
      if (window.scrollY > 10) {
        this.floating = true

        return
      }

      this.floating = false
    })
  },
  methods: {
    navigate() {
      if (this.$store.state.client) {
        this.$store.commit('setStep', 'wallet')

        return
      }

      this.$store.commit('setStep', 'mnemonic')
    },
  },
}
</script>
